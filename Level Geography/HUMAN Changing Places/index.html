<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Level-Up Flashcards</title>
  <style>
    :root { color-scheme: dark; }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#0b0b0b; color:#fff;
    }
    .wrap{ max-width: 980px; margin:0 auto; padding: 28px 18px 40px; }
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap;
      margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .brand img{ height:48px; width:auto; display:block; }
    .titles h1{
      margin:0; font-size:42px; letter-spacing:2px; text-transform:uppercase;
    }
    .titles .sub{
      margin-top:6px; font-size:14px; opacity:.85;
    }
    .pillrow{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .pill{
      border:1px solid #c9a227; color:#c9a227;
      padding:8px 10px; border-radius:999px; font-size:13px;
      background: rgba(201,162,39,0.06);
    }
    .controls{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin: 14px 0 18px;
    }
    button{
      background:#111; color:#fff; border:1px solid #333;
      padding:10px 12px; border-radius:12px; cursor:pointer;
    }
    button:hover{ border-color:#555; }
    .card{
      border:1px solid #c9a227; border-radius:18px;
      padding: 22px; min-height: 220px;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center;
      background: radial-gradient(1000px 260px at 50% 0%, rgba(201,162,39,0.10), transparent 55%);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      user-select:none;
    }
    .label{ font-size:12px; letter-spacing:2px; color:#c9a227; margin-bottom:10px; }
    .text{ font-size:26px; line-height:1.25; max-width: 860px; }
    .meta{
      display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;
      margin-top: 14px; opacity:.85; font-size:13px;
    }
    .error{
      border:1px solid #ff5a5a; background:rgba(255,90,90,0.08);
      padding:12px 14px; border-radius:12px; margin-top:14px;
      white-space:pre-wrap;
    }
    .hint{ opacity:.8; font-size:13px; margin-top:8px; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <!-- Optional: swap this to your logo path if you have one in the repo -->
        <!-- <img src="assets/levelup-logo.png" alt="Level-Up"> -->
        <div class="titles">
          <h1 id="mainTitle">A LEVEL GEOGRAPHY</h1>
          <div class="sub" id="subTitle">Click the card to flip. Use shuffle + reset.</div>
        </div>
      </div>
      <div class="pillrow">
        <div class="pill" id="topicPill">TOPIC: —</div>
        <div class="pill" id="countPill">CARDS: —</div>
      </div>
    </div>

    <div class="controls">
      <button id="btnPrev">◀ Prev</button>
      <button id="btnFlip">Flip</button>
      <button id="btnNext">Next ▶</button>
      <button id="btnShuffle">Shuffle</button>
      <button id="btnReset">Reset</button>
    </div>

    <div class="card" id="card">
      <div class="label" id="sideLabel">FRONT</div>
      <div class="text" id="cardText">Loading flashcards…</div>
      <div class="hint" id="hint"></div>
    </div>

    <div class="meta">
      <div id="progress">Card — of —</div>
      <div id="source">Source: —</div>
    </div>

    <div class="error" id="errorBox" style="display:none;"></div>
  </div>

<script>
  // ---- helpers ----
  const $ = (id) => document.getElementById(id);

  function getParam(name){
    const p = new URLSearchParams(location.search);
    return p.get(name);
  }

  function niceDecode(s){
    try { return decodeURIComponent(s); } catch { retur
